小伙伴们最近可好？我是牛牛，好久不见。牛牛最近正在准备晋级答辩，加上本身的项目进度，简直是忙疯了，鸽了一周一更的flag，实属惭愧。

不过这次答辩也让牛牛收获了很多，不管是技术知识还是逻辑思路，甚至是准备答辩PPT，原来都是有很多套路可以拿来加分的，又有了好多可以和小伙伴们分享的硬核啦！感谢大家的不离不弃，让牛牛能够慢慢输出这些成果。

今天就先来跟大家分享一道算法题，不像之前的算法题，思路层层递进，这次可谓是三种截然不同的解法，相信大家能有所收获。

## 故事起源

在一条圆形环路上有N个加油站，我们有一辆汽车，它的油箱容量无限，我们希望可以绕环路行驶一周，欣赏沿途美景。

我们用数组<b><font color=blue>oil</font></b>来记录沿路加油站能提供的油量，用数组<b><font color=blue>cost</font></b>来表示开往下一个加油站的油量损耗。

假设我们从第<b><font color=blue>i</font></b>个的加油站出发，一开始汽车油箱为空，我们可以从加油站获得<b><font color=blue>oil[i]</font></b>升油，开往下个加油站需要耗费油量<b><font color=blue>cost[i]</font></b>升。

那么问题来了，在不同输入情况下，我们能否实现绕环路行驶一周的计划呢？如果可以，则返回出发时加油站的编号，否则返回<b><font color=blue>-1</font></b>。

## 问题剖析

这个问题有几个要点我们需要了解：

- 每个加油站都可以补充油，路途中损耗油；
- 如果损耗大于当前剩余油量，那么不可达；
- 从任意点开始都可以；
- 只要能行驶一周就满足条件，所以如果有多解，任选一个即可。

## 花式加油

我们先来举个🌰，从答案倒推过程，更加直观地理解题意：

<b><font color=red>输入</font></b>

oil=[4，5，3，1，4，3]

cost=[5，4，3，4，2，1]

<b><font color=red>输出</font></b>

4

由此可知，汽车行驶轨迹如下:
<center>
  
![](https://mmbiz.qpic.cn/mmbiz_gif/HQKXnkPzzdsDibxANGDRFdydkHQcrRibwbSGldCtAiaqs8ocJ3abCawr0QHniblM7ia9W9S0JTxlKgGXhcOHTyD9gAQ/640?wx_fmt=gif&wxfrom=5&wx_lazy=1)</center>

从4号加油站(索引为4)出发，可获得4升汽油。此时油箱有=0+4=4升汽油；

开往5号加油站，此时油箱有4-2（路程中消耗的汽油）=2升汽油；

开往0号加油站，此时油箱有2+3（从5号加油站获得的汽油）-1（开往0号加油站消耗的汽油）=4升汽油；

开往1号加油站，此时油箱有4+4-5=3升汽油；

开往2号加油站，此时油箱有3+5-4=4升汽油；

开往3号加油站，此时油箱有4+3-3=4升汽油；

最后返回4号加油站，油箱有4+1-4=1，说明足够返回到4号加油站。

因此，4可为起始索引。

接下来，我们就来看看有哪些方法可以帮助我们解决这个加油站问题吧～

**暴力法**

因为从任意点开始都可以。那么最简单粗暴的办法，就是以每个点为起点，挨个试一试。

不过，这样的时间复杂度是<b><font color=blue>O(N^2)</font></b>，肯定是不达标的。但最直观的方法想出来，通常可以作为一个优化的基础，帮助我们更进一步拓展思路。

**倒车法**

既然只需要任意解，那么我们可以从任意点开始，如果油够，就继续开，如果油不够，就向上一个加油站借油，也就是倒车。

按照这样的路线寻找，如果存在有某个点，可以绕一圈，那么这个点，就是起点。或者某个点，借完了前面所有的油，都不可达，那就是无解。

我们就从0号加油站出发，下图是当前状态：
<center>

![](https://files.mdnice.com/user/13621/c875b417-265d-4482-98ef-fd50b5b865f4.png)</center>

我们可以看到，拿到0号加油站的油4升，但开往1号加油站需消耗5升油，这时候就欠了一升油。所以我们倒车到上一站，看能不能借到足够的油。
<center>

![](https://files.mdnice.com/user/13621/907f8626-37fd-498a-b131-44123c3cfc26.png)</center>

起点变成了5号加油站，5号到0号加油站还剩2升，加上0和1之间的-1升，还剩1升。有油我们就可以继续往前开了。
<center>

![](https://files.mdnice.com/user/13621/6ceeac2d-8e69-43a0-9938-262b14333af8.png)</center>

由于开到1号加油站还剩余1升油，加上1号加油站给我们补给了5升油，所以当开到2号加油站的时候，尽管路途中我们消耗了4升油，但还剩余2升，所以我们还可以继续往前！
<center>

![](https://files.mdnice.com/user/13621/5217599b-fa11-4979-aebe-d20667959536.png)</center>

2号油站到3号，加油、耗油都是3，所以现在的剩余油量和上轮一样，也是2升。
<center>

![](https://files.mdnice.com/user/13621/ae1c0016-a1de-4721-971b-a28b345014bb.png)</center>

3到4路程太远，消耗了4升油，而3号油站只补充了1升，于是剩余油量是（1+2）-4为-1。不可达，我们只能后退借油。
<center>

![](https://files.mdnice.com/user/13621/8a8de54f-a902-40d7-8efb-cbdcf8a4b633.png)</center>

这下我们得到了4号油站到5号油站的油量，4-2=2升。足以补上目前的-1，还余1升。此时，起点终点都是4号位置，油量大于等于0。说明已经成功跑完一圈了，所以起点就是4号加油站。

代码如下：

![](https://mmbiz.qpic.cn/mmbiz_png/HQKXnkPzzdsISe0X1IGIGPGXk8eGyhpZiaa8XYeCqRQlFsAJsnHHQL75ZaHsJUUuPPxovUvNSibxEnr51PBFbKzw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

**图解法**

还有没有其它办法呢？为了方便分析，我们来画一个图辅助思考。

横坐标取余加油站总数就是加油站编号，纵坐标表示当前节点剩余油量。如果我们从0号位开始走，则耗油情况如图所示：
<center>

![](https://files.mdnice.com/user/13621/2c537cc8-e6ab-4979-954e-7de3f8eb354b.png)</center>

仔细思考下，会有一个前提，只要<b><font color=blue>总剩余油量大于等于0</font></b>，那么总有一个点可以走一圈。同时，通过坐标图，我们还可以发现一个现象：无论从哪个点出发，<b><font color=blue>折线走势都会一模一样</font></b>。

所以满足总油量大于0，那么我们只要让最低点在0以上，那么此时最低点就是最好的出发点。
<center>

![](https://files.mdnice.com/user/13621/ee271794-2843-42ea-aca4-a1e1834e4cfb.png)</center>

让我们配合代码来看看：
<center>
  
![](https://mmbiz.qpic.cn/mmbiz_png/HQKXnkPzzdsISe0X1IGIGPGXk8eGyhpZ4EV57yOkc48GWKrV9WK1l6KI7HxGicZghmOjTBXI924OS10DQmmDdZA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)</center>

果不其然，成功找到了起点，再也不用担心兜风到半路没油了！

骑上我心爱的小突突，啊不，小汽车～它永远不会堵车～。
<center>

![](https://mmbiz.qpic.cn/mmbiz_gif/HQKXnkPzzdsDibxANGDRFdydkHQcrRibwbF66S27xjdXvdSdqaickpIqNrxBuGPvINS7fFQ5w37NRPAfAWWQ5jPiaQ/640?wx_fmt=gif&wxfrom=5&wx_lazy=1)</center>

## 突突复盘

暴力法是基础解法，我们往往第一个就想到它；倒车法体现了程序思路上的灵活，可进可退；而图解法则另辟蹊径，从完全不同的角度去解决了这个问题。

在实际工作中，我们解决问题的方法也不应该局限在固定的思维模式中，多发现、多从其他角度出发，说不定就能发现一些小巧思让你眼前一亮！希望大家都能有所收获，我们下期再见！











